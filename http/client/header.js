//////////////////////////////////////////////////////////////////////
// header.js
//////////////////////////////////////////////////////////////////////
import { Client } from './index.js';

//////////////////////////////////////////////////////////////////////
// Class
//////////////////////////////////////////////////////////////////////
class Header {

    //////////////////////////////////////////////////////////////////////
    // Constructor
    //////////////////////////////////////////////////////////////////////
    constructor() {
        this.fields = [];
    }


    //////////////////////////////////////////////////////////////////////
    // Append.
    //////////////////////////////////////////////////////////////////////
    Append(name, value) {
        this.fields.push({
            name: name,
            value: value
        });
        return this;
    }


    //////////////////////////////////////////////////////////////////////
    // Count HTTP header fields.
    //////////////////////////////////////////////////////////////////////
    CountFields() {
        return this.fields.length;
    }


    //////////////////////////////////////////////////////////////////////
    // Set Content-Type.
    //////////////////////////////////////////////////////////////////////
    SetContentType(value) {
        this.fields.push({
            name: Client.HEADER_CONTENT_TYPE,
            value: value
        });
        return this;
    }


    //////////////////////////////////////////////////////////////////////
    // Set Content-Type to "application/json".
    //////////////////////////////////////////////////////////////////////
    SetContentTypeApplicationJson() {
        this.fields.push({
            name: Client.HEADER_CONTENT_TYPE,
            value: Client.HEADER_MEDIA_TYPE_APPLICATION_JSON
        });
        return this;
    }


    //////////////////////////////////////////////////////////////////////
    // Get HTTP header field by index.
    //////////////////////////////////////////////////////////////////////
    GetField(index) {
        return this.fields[index];
    }


    //////////////////////////////////////////////////////////////////////
    // Get field name from the specified field.
    //////////////////////////////////////////////////////////////////////
    GetFieldName(field) {
        if(field === undefined || field === null || field.name === undefined || field.name === null) {
            return '';
        }
        return field.name;
    }


    //////////////////////////////////////////////////////////////////////
    // Get field value from the specified field.
    //////////////////////////////////////////////////////////////////////
    GetFieldValue(field) {
        if(field === undefined || field === null || field.value === undefined || field.value === null) {
            return '';
        }
        return field.value;
    }

}
export { Header };
